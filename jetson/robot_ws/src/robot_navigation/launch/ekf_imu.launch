<launch>
  <!-- 1) Nodelet manager para carregar nodelets -->
  <node pkg="nodelet"
        type="nodelet"
        name="nodelet_manager"
        args="manager"/>

  <!-- 2) IMU Filter Madgwick (consome /imu/data_raw e publica /imu/data_filtered) -->
  <node pkg="nodelet"
        type="nodelet"
        name="imu_filter_nodelet"
        args="standalone imu_filter_madgwick/ImuFilterNodelet"
        output="screen">
    <param name="use_mag"             value="false"/>
    <param name="publish_tf"          value="false"/>
    <param name="gain"                value="0.05"/>
    <!-- <param name="constant_dt"         value="0.02"/> -->
    <param name="orientation_stddev"  value="0.1"/>
    <param name="time_jump_threshold" value="10.0"/>
    <remap from="imu/data_raw" to="camera/imu"/>
    <!-- <remap from="imu/data_raw" to="imu/data"/> -->
    <remap from="imu/data"     to="/imu/data_filtered"/>
  </node>

  <node name="imu_stable" pkg="robot_navigation" type="imu_stable.py"/> 

  <!-- 3) EKF Localization Node -->
<!-- 
  <node pkg="robot_localization"
        type="ekf_localization_node"
        name="ekf_localization"
        output="screen">
    <param name="odom0" value="/odom"/>
    <rosparam file="$(find robot_navigation)/config/ekf_odom_imu.yaml"
              command="load"/>
  </node>
   -->
</launch>

